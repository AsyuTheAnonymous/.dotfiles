# Simplified Wayfire Configuration for Performance

[core]
background_color = \#1A1A1AFF
close_top_view = <super> KEY_Q | <alt> KEY_F4
# Reduced plugin list for baseline performance
plugins = alpha animate autostart command decoration expo fast-switcher foreign-toplevel grid gtk-shell idle move oswitch place resize shortcuts-inhibit switcher vswitch wayfire-shell window-rules 
preferred_decoration_mode = server
vheight = 2
vwidth = 3
xwayland = true
max_render_time = 10 # Keep max render time limit
# vrr = 2 # Optional: Uncomment if your monitor supports VRR and you want to try it

[input]
# Keep your existing input settings or adjust as needed
# Example defaults (adjust kb_repeat, cursor size etc. if needed):
cursor_size = 24
kb_repeat_delay = 400
kb_repeat_rate = 40
xkb_layout = us
# Add other specific settings like tap_to_click if you had them

# --- Essential Plugins Configuration ---

[autostart]
autostart_wf_shell = true # Start wf-panel/dock if needed
# Attempt to start portal services via systemctl from within the session - COMMENTED OUT - Let NixOS/systemd handle this
# portal_main = systemctl --user start xdg-desktop-portal.service
# portal_wlr = systemctl --user start xdg-desktop-portal-wlr.service

[decoration]
active_color = \#222222AA
border_size = 4
button_order = minimize maximize close
font = sans-serif
ignore_views = none
inactive_color = \#333333DD
title_height = 30

[move]
activate = <super> BTN_LEFT
enable_snap = true
enable_snap_off = true
snap_threshold = 10

[resize]
activate = <super> BTN_RIGHT

[switcher] # Alt-Tab
next_view = <alt> KEY_TAB
prev_view = <alt> <shift> KEY_TAB
speed = 200ms linear # Faster, simpler animation

[fast-switcher] # Alt-Esc
activate = <alt> KEY_ESC
activate_backward = <alt> <shift> KEY_ESC
inactive_alpha = 0.700000

[vswitch] # Workspace switching visuals
background = \#1A1A1AFF
binding_down = <alt> <super> KEY_DOWN
binding_left = <alt> <super> KEY_LEFT
binding_right = <alt> <super> KEY_RIGHT
binding_up = <alt> <super> KEY_UP
duration = 150ms linear # Faster, simpler animation
with_win_left = <alt> <shift> <super> KEY_LEFT
with_win_right = <alt> <shift> <super> KEY_RIGHT
with_win_up = <alt> <shift> <super> KEY_UP
with_win_down = <alt> <shift> <super> KEY_DOWN
wraparound = false

[oswitch] # Output switching
next_output = <super> KEY_O
next_output_with_win = <shift> <super> KEY_O

[expo] # Workspace overview
background = \#1A1A1AFF
duration = 200ms linear # Faster animation
toggle = <super> KEY_E

[grid] # Window tiling/snapping
duration = 150ms linear # Faster animation
restore = <super> KEY_DOWN | <super> KEY_KP0
slot_b = <super> KEY_KP2
slot_bl = <super> KEY_KP1
slot_br = <super> KEY_KP3
slot_c = <super> KEY_UP | <super> KEY_KP5
slot_l = <super> KEY_LEFT | <super> KEY_KP4
slot_r = <super> KEY_RIGHT | <super> KEY_KP6
slot_t = <super> KEY_KP8
slot_tl = <super> KEY_KP7
slot_tr = <super> KEY_KP9
type = fade # Simpler animation than crossfade

[place] # Initial window placement
mode = center

[animate] # Window animations
# Simplified animations - fade is generally lighter than zoom
close_animation = fade
open_animation = fade
duration = 150ms linear # Faster duration
enabled_for = type equals "toplevel"
startup_duration = 0ms linear # Disable startup animation entirely

[alpha] # Window transparency (if needed)
min_value = 0.100000
modifier = <alt> <super> 

[idle] # Idle settings (DPMS, screensaver)
# dpms_timeout = 600 # Example: Turn off screen after 10 mins
screensaver_timeout = 1800 # Example: Lock screen after 30 mins (requires swaylock etc.)
# disable_on_fullscreen = true # Keep default

[workarounds]
# Keep existing workarounds
all_dialogs_modal = true
app_id_mode = stock
discard_command_output = true
dynamic_repaint_delay = false
enable_opaque_region_damage_optimizations = true 
enable_so_unloading = false
force_preferred_decoration_mode = false
remove_output_limits = false
use_external_output_configuration = false

# --- Output Configuration ---
# IMPORTANT: Verify this section matches your hardware

[output]
# Generic output settings (apply if no specific output matches)
mode = auto
position = auto
scale = 1.000000
transform = normal

# [output:DP-1] # Specific settings for DP-1 - COMMENTED OUT - Use generic 'auto' mode for testing
# mode = 2560x1440@165 # Your desired mode
# position = 0,0 # Position on the desktop layout
# scale = 1.000000 # Scaling factor
# transform = normal # Rotation/flipping

# Add sections for other monitors if you have them, e.g. [output:HDMI-A-1]

# --- Other Plugin Sections (Defaults or Disabled) ---
# Sections for plugins removed from [core].plugins are not needed
# or will use defaults if the plugin is somehow still loaded.
# Keeping gtk-shell, foreign-toplevel, wayfire-shell, window-rules etc.
# with default settings is usually fine.

[gtk-shell]
[foreign-toplevel]
[wayfire-shell]
[window-rules]
[shortcuts-inhibit]
[command] # Keep for potential custom commands via IPC
